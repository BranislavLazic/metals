<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><title>Integrating a new build tool · Metals</title><meta name="viewport" content="width=device-width"/><meta name="generator" content="Docusaurus"/><meta property="og:title" content="Integrating a new build tool · Metals"/><meta property="og:type" content="website"/><meta property="og:url" content="http://scalameta.org/metals/index.html"/><meta property="og:description" content="Metals currently supports only sbt through the sbt-metals plugins and"/><meta property="og:image" content="http://scalameta.org/metals/img/scalameta-logo.png"/><meta name="twitter:card" content="summary"/><meta name="twitter:image" content="http://scalameta.org/metals/img/scalameta-logo.png"/><link rel="shortcut icon" href="/metals/img/favicon.ico"/><link rel="stylesheet" href="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.css"/><link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css"/><link rel="stylesheet" href="/metals/css/main.css"/></head><body class="sideNavVisible doc separateOnPageNav"><div class="fixedHeaderContainer"><div class="headerWrapper wrapper"><header><a href="/metals/"><img class="logo" src="/metals/img/scalameta-logo.png" alt="Metals"/><h2 class="headerTitle">Metals</h2></a><div class="navigationWrapper navigationSlider"><nav class="slidingNav"><ul class="nav-site nav-site-internal"><li class="siteNavGroupActive"><a href="/metals/docs/installation-contributors.html" target="_self">Docs</a></li><li class=""><a href="https://github.com/scalameta/metals" target="_blank">GitHub</a></li><li class="navSearchWrapper reactNavSearchWrapper"><input type="text" id="search_input_react" placeholder="Search" title="Search"/></li></ul></nav></div></header></div></div><div class="navPusher"><div class="docMainWrapper wrapper"><div class="container docsNavContainer" id="docsNav"><nav class="toc"><div class="toggleNav"><section class="navWrapper wrapper"><div class="navBreadcrumb wrapper"><div class="navToggle" id="navToggler"><i></i></div><h2><i>›</i><span>Contributors</span></h2></div><div class="navGroups"><div class="navGroup navGroupActive"><h3>Overview</h3><ul><li class="navListItem"><a class="navItem" href="/metals/docs/overview.html">Overview</a></li></ul></div><div class="navGroup navGroupActive"><h3>Contributors</h3><ul><li class="navListItem"><a class="navItem" href="/metals/docs/installation-contributors.html">Installation</a></li><li class="navListItem"><a class="navItem" href="/metals/docs/new-editor.html">Integrating a new editor</a></li><li class="navListItem navListItemActive"><a class="navItem navItemActive" href="/metals/docs/new-build-tool.html">Integrating a new build tool</a></li></ul></div><div class="navGroup navGroupActive"><h3>Users</h3><ul><li class="navListItem"><a class="navItem" href="/metals/docs/installation-users.html">Installation</a></li></ul></div></div></section></div><script>
          var toggler = document.getElementById('navToggler');
          var nav = document.getElementById('docsNav');
          toggler.onclick = function() {
            nav.classList.toggle('docsSliderActive');
          };
        </script></nav></div><div class="container mainContainer"><div class="wrapper"><div class="post"><header class="postHeader"><a class="edit-page-link button" href="https://github.com/scalameta/metals/edit/master/docs/new-build-tool.md" target="_blank" rel="noreferrer noopener">Edit</a><h1>Integrating a new build tool</h1></header><article><div><span><p>Metals currently supports only sbt through the sbt-metals plugins and
<code>metalsSetup</code> task. However, metals does not require sbt and can be integrated
with other build tools.</p>
<p>The long-term strategy to integrate metals with build tools is to support some
standard LSP-inspired protocol. An example of how such a protocol might look
like is the draft for a potential
<a href="https://github.com/scalacenter/bsp/blob/master/docs/bsp.md">&quot;Build Server Protocol&quot;</a>.
Until such a protocol becomes more standard, metals can import build metadata
through a custom property file format. Property files are generated by the build
tool in the location <code>&lt;workspace-root&gt;/.metals/buildinfo/**/*.properties</code>.</p>
<p>Metals expects one property file to correspond to one build
target/module/artifact. For example in sbt, one property file corresponds to one
project+configuration combination. An sbt build with two projects, where one
project has main+test configurations and the other project has
main+test+integration-test configuration, metals expects a total of 5 property
files.</p>
<h2><a class="anchor" aria-hidden="true" id="build-properties"></a><a href="#build-properties" aria-hidden="true" class="hash-link" ><svg aria-hidden="true" height="16" version="1.1" viewBox="0 0 16 16" width="16"><path fill-rule="evenodd" d="M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"></path></svg></a>Build properties</h2>
<p>The keys of the build property file format are:</p>
<ul>
<li><code>sources</code>: String containing path separated ( <code>java.io.File.pathSeparator</code>)
list of source files for this target.</li>
<li><code>unmanagedSourceDirectories</code>: String containing path separated list of
directories where all nested source files belong to this target. Can be empty
if <code>sources</code> is comprehensive, but note that the property file must be
re-generated whenever a new file is created.</li>
<li><code>managedSourceDirectories</code>: Same as <code>unmanagedSourceDirectories</code>, except for
automatically generated source files.</li>
<li><code>scalacOptions</code>: String containing space separated list of compiler options to
be passed to the Scala presentation compiler. Must not include dependencies.
It should be valid to pass this value verbatim to the <code>scalac</code> command-line
interface.</li>
<li><code>classDirectory</code>: String path for a single directory where artifacts for this
target are output. Compilation artifacts from compiling <code>sources</code> should
appear in <code>classDirectory</code>.</li>
<li><code>dependencyClasspath</code>: String of path separated list of either jar files or
directories for dependencies of this module.</li>
<li><code>scalaVersion</code>: String of the Scala compiler version used to compile this
target. Only 2.12 is supported, consider contributing to
<a href="https://github.com/scalameta/metals/issues/201">#201</a> if you would like to
add 2.11 support.</li>
<li><code>sourceJars</code>: String of path separated list of jars or directories containing
<code>*.scala</code> and <code>*.java</code> source files for the dependencies in
<code>libraryDependencies</code>. Matches the <code>-source.jar</code> that are typically published
to Maven alongside library artifacts. Required to support goto definition in
the classpath.</li>
</ul>
<p>Refer to
<a href="https://github.com/scalameta/metals/blob/master/sbt-metals/src/main/scala/scala/meta/sbt/MetalsPlugin.scala">MetalsPlugin.scala</a>
for an example of how to generate the build properties file format.</p>
</span></div></article></div><div class="docs-prevnext"><a class="docs-prev button" href="new-editor.html">← Integrating a new editor</a><a class="docs-next button" href="installation-users.html">Installation →</a></div></div></div><nav class="onPageNav"><ul class="toc-headings"><li><a href="#build-properties">Build properties</a></li></ul></nav></div><footer class="nav-footer" id="footer" style="background-color:#1B555C;"><section class="sitemap"><a href="/metals/" class="nav-home"><img src="/metals/img/scalameta-logo.png" alt="Metals" width="66" height="58"/></a><div><h5>Docs</h5><a href="
                /metals/docs/overview.html">Overview</a><a href="
                /metals/docs/installation-contributors.html">Contributors</a></div><div><h5>Community</h5><a href="https://gitter.im/scalameta/metals" target="_blank">Chat on Gitter</a></div><div><h5>More</h5><a href="https://github.com/scalameta/metals" target="_blank">GitHub</a></div></section><section class="copyright">Copyright © 2018 Metals</section></footer></div><script type="text/javascript" src="https://cdn.jsdelivr.net/docsearch.js/1/docsearch.min.js"></script><script>
              var search = docsearch({
                
                apiKey: 'c865f6d974a3072a35d4b53d48ac2307',
                indexName: 'metals',
                inputSelector: '#search_input_react'
              });
            </script></body></html>