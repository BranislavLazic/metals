<!DOCTYPE html>
  
  
  
  
   <html class="no-js"> 

  <head lang="en-us">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,user-scalable=no,initial-scale=1,maximum-scale=1">
    <meta http-equiv="X-UA-Compatible" content="IE=10" />
    <title>Integrating a new build tool - Metals</title>
    <meta name="generator" content="Hugo 0.39" />

    
    <link rel="canonical" href="http://scalameta.org/metals/contributors/new-build-tool/">
    

    <meta property="og:url" content="http://scalameta.org/metals/contributors/new-build-tool/">
    <meta property="og:title" content="Metals">
    <meta property="og:image" content="http://scalameta.org/metals/logo.png">
    <meta name="apple-mobile-web-app-title" content="Metals">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">

    <link rel="shortcut icon" type="image/x-icon" href="http://scalameta.org/metals/favicon.ico">
    <link rel="icon" type="image/x-icon" href="http://scalameta.org/metals/favicon.ico">

    <style>
      @font-face {
        font-family: 'Icon';
        src: url('http://scalameta.org/metals/fonts/icon.eot');
        src: url('http://scalameta.org/metals/fonts/icon.eot')
               format('embedded-opentype'),
             url('http://scalameta.org/metals/fonts/icon.woff')
               format('woff'),
             url('http://scalameta.org/metals/fonts/icon.ttf')
               format('truetype'),
             url('http://scalameta.org/metals/fonts/icon.svg')
               format('svg');
        font-weight: normal;
        font-style: normal;
      }
    </style>

    <link rel="stylesheet" href="http://scalameta.org/metals/stylesheets/application.css">
    <link rel="stylesheet" href="http://scalameta.org/metals/stylesheets/temporary.css">
    <link rel="stylesheet" href="http://scalameta.org/metals/stylesheets/palettes.css">
    <link rel="stylesheet" href="http://scalameta.org/metals/stylesheets/highlight/highlight.css">

    
    
    
    <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:400,700|Roboto&#43;Mono">
    <style>
      body, input {
        font-family: 'Roboto', Helvetica, Arial, sans-serif;
      }
      pre, code {
        font-family: 'Roboto Mono', 'Courier New', 'Courier', monospace;
      }
    </style>

    
    <link rel="stylesheet" href="http://scalameta.org/metals/style.css">
    
    <script src="http://scalameta.org/metals/javascripts/modernizr.js"></script>

    

  </head>
  <body class="palette-primary-blue-grey palette-accent-red">




<div class="backdrop">
	<div class="backdrop-paper"></div>
</div>

<input class="toggle" type="checkbox" id="toggle-drawer">
<input class="toggle" type="checkbox" id="toggle-search">
<label class="toggle-button overlay" for="toggle-drawer"></label>

<header class="header">
	<nav aria-label="Header">
  <div class="bar default">
    <div class="button button-menu" role="button" aria-label="Menu">
      <label class="toggle-button icon icon-menu" for="toggle-drawer">
        <span></span>
      </label>
    </div>
    <div class="stretch">
      <div class="title">
        Integrating a new build tool
      </div>
    </div>

    

    
    
        
  </div>
  <div class="bar search">
    <div class="button button-close" role="button" aria-label="Close">
      <label class="toggle-button icon icon-back" for="toggle-search"></label>
    </div>
    <div class="stretch">
      <div class="field">
        <input class="query" type="text" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck>
      </div>
    </div>
    <div class="button button-reset" role="button" aria-label="Search">
      <button class="toggle-button icon icon-close" id="reset-search"></button>
    </div>
  </div>
</nav>
</header>

<main class="main">
	<div class="drawer">
		<nav aria-label="Navigation">
  <a href="http://scalameta.org/metals/" class="project">
    <div class="banner">
      
        <div class="logo">
          <img src="http://scalameta.org/metals/logo.png">
        </div>
      
      <div class="name">
        <strong>Metals <span class="version">0.1.0</span></strong>
        
      </div>
    </div>
  </a>

  <div class="scrollable">
    <div class="wrapper">
      

      <div class="toc">
        
        <ul>
          




<li>
  
    <span class="section">Contributors</span>
    <ul>
      
        
        



<a  title="Installation" href="/metals/contributors/installation/">
	
	Installation
</a>



      
        
        



<a  title="Integrating a new editor" href="/metals/contributors/new-editor/">
	
	Integrating a new editor
</a>



      
        
        



<a class="current" title="Integrating a new build tool" href="/metals/contributors/new-build-tool/">
	
	Integrating a new build tool
</a>


<ul id="scrollspy">
</ul>


      
    </ul>
  
</li>



<li>
  
    <span class="section">Users</span>
    <ul>
      
        
        



<a  title="Installation" href="/metals/users/installation/">
	
	Installation
</a>



      
    </ul>
  
</li>


        </ul>
        

        
      </div>
    </div>
  </div>
</nav>

	</div>

	<article class="article">
		<div class="wrapper">
			<h1>Integrating a new build tool </h1>

			

<p>Metals currently supports only sbt through the sbt-metals plugins and
<code>metalsSetup</code> task. However, metals does not require sbt and can be integrated
with other build tools.</p>

<p>The long-term strategy to integrate metals with build tools is to support some
standard LSP-inspired protocol. An example of how such a protocol might look
like is the draft for a potential
<a href="https://github.com/scalacenter/bsp/blob/master/docs/bsp.md">&ldquo;Build Server Protocol&rdquo;</a>.
Until such a protocol becomes more standard, metals can import build metadata
through a custom property file format. Property files are generated by the build
tool in the location <code>&lt;workspace-root&gt;/.metals/buildinfo/**/*.properties</code>.</p>

<p>Metals expects one property file to correspond to one build
target/module/artifact. For example in sbt, one property file corresponds to one
project+configuration combination. An sbt build with two projects, where one
project has main+test configurations and the other project has
main+test+integration-test configuration, metals expects a total of 5 property
files.</p>

<h2 id="build-properties">Build properties</h2>

<p>The keys of the build property file format are:</p>

<ul>
<li><code>sources</code>: String containing path separated ( <code>java.io.File.pathSeparator</code>)
list of source files for this target.</li>
<li><code>unmanagedSourceDirectories</code>: String containing path separated list of
directories where all nested source files belong to this target. Can be empty
if <code>sources</code> is comprehensive, but note that the property file must be
re-generated whenever a new file is created.</li>
<li><code>managedSourceDirectories</code>: Same as <code>unmanagedSourceDirectories</code>, except for
automatically generated source files.</li>
<li><code>scalacOptions</code>: String containing space separated list of compiler options to
be passed to the Scala presentation compiler. Must not include dependencies.
It should be valid to pass this value verbatim to the <code>scalac</code> command-line
interface.</li>
<li><code>classDirectory</code>: String path for a single directory where artifacts for this
target are output. Compilation artifacts from compiling <code>sources</code> should
appear in <code>classDirectory</code>.</li>
<li><code>dependencyClasspath</code>: String of path separated list of either jar files or
directories for dependencies of this module.</li>
<li><code>scalaVersion</code>: String of the Scala compiler version used to compile this
target. Only 2.12 is supported, consider contributing to
<a href="https://github.com/scalameta/metals/issues/201">#201</a> if you would like to
add 2.11 support.</li>
<li><code>sourceJars</code>: String of path separated list of jars or directories containing
<code>*.scala</code> and <code>*.java</code> source files for the dependencies in
<code>libraryDependencies</code>. Matches the <code>-source.jar</code> that are typically published
to Maven alongside library artifacts. Required to support goto definition in
the classpath.</li>
</ul>

<p>Refer to
<a href="https://github.com/scalameta/metals/blob/master/sbt-metals/src/main/scala/scala/meta/sbt/MetalsPlugin.scala">MetalsPlugin.scala</a>
for an example of how to generate the build properties file format.</p>


			<aside class="copyright" role="note">
				
				Documentation built with
				<a href="https://www.gohugo.io" target="_blank">Hugo</a>
				using the
				<a href="http://github.com/digitalcraftsman/hugo-material-docs" target="_blank">Material</a> theme.
			</aside>

			<footer class="footer">
				

<nav class="pagination" aria-label="Footer">
  <div class="previous">
  
      <a href="http://scalameta.org/metals/users/installation/" title="Installation">
        <span class="direction">
          Previous
        </span>
        <div class="page">
          <div class="button button-previous" role="button" aria-label="Previous">
            <i class="icon icon-back"></i>
          </div>
          <div class="stretch">
            <div class="title">
              Installation
            </div>
          </div>
        </div>
      </a>
  
  </div>

  <div class="next">
  
      <a href="http://scalameta.org/metals/contributors/new-editor/" title="Integrating a new editor">
        <span class="direction">
          Next
        </span>
        <div class="page">
          <div class="stretch">
            <div class="title">
              Integrating a new editor
            </div>
          </div>
          <div class="button button-next" role="button" aria-label="Next">
            <i class="icon icon-forward"></i>
          </div>
        </div>
      </a>
  
  </div>
</nav>





			</footer>
		</div>
	</article>

	<div class="results" role="status" aria-live="polite">
		<div class="scrollable">
			<div class="wrapper">
				<div class="meta"></div>
				<div class="list"></div>
			</div>
		</div>
	</div>
</main>

    <script>
    
      var base_url = '';
      var repo_id  = '';
    
    </script>

    <script src="http://scalameta.org/metals/javascripts/application.js"></script>
    

    <script>
      /* Add headers to scrollspy */
      var headers   = document.getElementsByTagName("h2");
      var scrollspy = document.getElementById('scrollspy');

      if(scrollspy) {
        if(headers.length > 0) {
          for(var i = 0; i < headers.length; i++) {
            var li = document.createElement("li");
            li.setAttribute("class", "anchor");

            var a  = document.createElement("a");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", headers[i].innerHTML);
            a.innerHTML = headers[i].innerHTML;

            li.appendChild(a)
            scrollspy.appendChild(li);
          }
        } else {
          scrollspy.parentElement.removeChild(scrollspy)
        }


        /* Add permanent link next to the headers */
        var headers = document.querySelectorAll("h1, h2, h3, h4, h5, h6");

        for(var i = 0; i < headers.length; i++) {
            var a = document.createElement("a");
            a.setAttribute("class", "headerlink");
            a.setAttribute("href", "#" + headers[i].id);
            a.setAttribute("title", "Permanent link")
            a.innerHTML = "¶";
            headers[i].appendChild(a);
        }
      }
    </script>

    

    <script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.8.0/highlight.min.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>
  </body>
</html>

